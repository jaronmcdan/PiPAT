# /etc/roi/roi.env (example)
#
# This file is OPTIONAL.
# - The code has sane defaults in config.py
# - Any value here overrides config.py via environment variables
# - The systemd unit loads this file automatically

# --- CAN ---
CAN_CHANNEL=can1
CAN_BITRATE=250000
# Set to 0 if you bring up SocketCAN elsewhere (e.g. /etc/network/interfaces)
CAN_SETUP=1

# Outgoing readback publish rate (ms). Set <=0 to disable TX scheduling.
CAN_TX_ENABLE=1
CAN_TX_PERIOD_MS=50

# --- Serial multimeter ---
MULTI_METER_PATH=/dev/ttyUSB0
MULTI_METER_BAUD=38400

# --- VISA ---
ELOAD_VISA_ID=USB0::11975::34816::*::0::INSTR
AFG_VISA_ID=ASRL/dev/ttyACM0::INSTR

# --- GPIO / relay ---
K1_PIN_BCM=26
# 1 => active-low relay boards (GPIO LOW energizes coil)
RELAY_ACTIVE_LOW=0

# 1 => DUT wired through NC contact (coil energized cuts power)
# 0 => DUT wired through NO contact (coil energized applies power)
RELAY_WIRING_NC=1

# 1 => CAN bit0==1 requests DUT OFF (kill)
# 0 => CAN bit0==1 requests DUT ON
RELAY_CAN_BIT1_IS_POWER_OFF=1

# Idle/default DUT power when control messages time out (and on startup if APPLY_IDLE_ON_STARTUP=1)
# 1 => power ON, 0 => power OFF
RELAY_IDLE_DUT_POWER=0

# --- Watchdog / timeouts (seconds) ---
CONTROL_TIMEOUT_SEC=2.0
# Optional per-device overrides
# RELAY_TIMEOUT_SEC=2.0
# ELOAD_TIMEOUT_SEC=2.0
# AFG_TIMEOUT_SEC=2.0
# MMETER_TIMEOUT_SEC=2.0

# Apply idle state immediately on program startup
APPLY_IDLE_ON_STARTUP=1

# Disable the Rich TUI (recommended for systemd)
ROI_HEADLESS=1

# --- Instrument idle behavior ---
# E-load idle means input OFF by default (safety)
ELOAD_IDLE_INPUT_ON=0
ELOAD_IDLE_SHORT_ON=0

# AFG idle means output OFF by default (safety)
AFG_IDLE_OUTPUT_ON=0
