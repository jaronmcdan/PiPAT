# /etc/roi/roi.env (example)
#
# This file is OPTIONAL.
# - The code has sane defaults in config.py
# - Any value here overrides config.py via environment variables
# - The systemd unit loads this file automatically

# --- CAN ---
CAN_CHANNEL=can1
CAN_BITRATE=250000
# Set to 0 if you bring up SocketCAN elsewhere (e.g. /etc/network/interfaces)
CAN_SETUP=1

# Outgoing readback publish rate (ms). Set <=0 to disable TX scheduling.
CAN_TX_ENABLE=1
CAN_TX_PERIOD_MS=50

# Performance / robustness tuning (optional)
CAN_RX_FILTERS_ENABLE=1
CAN_TXQUEUELEN=512
CAN_RESTART_MS=100
CAN_SEND_TIMEOUT_S=0.01

# --- Serial multimeter ---
MULTI_METER_PATH=/dev/ttyUSB0
MULTI_METER_BAUD=38400

# --- VISA ---
ELOAD_VISA_ID=USB0::11975::34816::*::0::INSTR
AFG_VISA_ID=ASRL/dev/ttyACM0::INSTR

# --- GPIO / K1 relay drive ---
K1_PIN_BCM=26
# 1 => active-low relay boards (GPIO LOW energizes coil)
K1_ACTIVE_LOW=0
# Invert CAN bit0 before driving K1 (optional)
K1_CAN_INVERT=0
# Idle K1 drive on timeout/startup
K1_IDLE_DRIVE=0

# --- Control watchdog (seconds) ---
CONTROL_TIMEOUT_SEC=2.0
K1_TIMEOUT_SEC=2.0
ELOAD_TIMEOUT_SEC=2.0
AFG_TIMEOUT_SEC=2.0
MMETER_TIMEOUT_SEC=2.0

# If True, apply idle states immediately on startup before processing controls.
APPLY_IDLE_ON_STARTUP=1

# --- Idle behavior ---
# E-load idle means input OFF by default (safety)
ELOAD_IDLE_INPUT_ON=0
ELOAD_IDLE_SHORT_ON=0

# AFG idle means output OFF by default (safety)
AFG_IDLE_OUTPUT_ON=0
